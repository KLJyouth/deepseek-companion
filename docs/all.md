# stanfai-司单服Ai智能安全法务 技术架构文档

## 1. 系统概述

stanfai-司单服Ai智能安全法务是广西港妙科技有限公司自主研发的智能安全法务管理系统，集成威胁检测、电子签约、合同归档、法务流程自动化等功能，采用三维可视化技术展示安全数据。系统采用 PHP + Node.js 混合架构，具有多层安全防护机制和量子安全加密体系，支持AI智能分析与自愈。

## 2. 系统架构

### 2.1 整体架构

- 前端服务：Node.js + Three.js 可视化
- 后端服务：PHP + MySQL
- 实时通信：WebSocket + Ratchet
- 安全层：量子加密 + 传统加密混合方案
- AI能力：威胁检测、合同风险分析、行为分析

### 2.2 技术栈

| 组件   | 技术选型                |
|--------|------------------------|
| 前端   | Node.js, Webpack, Three.js |
| 后端   | PHP 7.4+, MySQL 8.0+   |
| 安全   | AES-256-GCM, Kyber1024, NTRU, SABER |
| 实时通信 | WebSocket, Ratchet      |
| 缓存   | Redis, Memcached        |
| AI     | Python服务/本地模型     |

### 2.3 安装与环境配置

- 推荐使用 `install.php` 一键安装部署，自动检测环境、生成`.env`、初始化数据库、创建管理员账号
- `.env` 文件用于存储数据库、加密、应用等环境变量，避免敏感信息硬编码
- 支持多环境切换，便于开发、测试、生产部署

## 3. 核心模块

### 3.1 认证授权系统

- 基础认证（用户名+密码）
- 设备指纹验证
- 地理位置验证
- 多因素认证（TOTP/生物识别）
- 行为分析与异常检测

### 3.2 电子签约与法务系统（本地自研）

- 合同模板创建与管理
- 合同实例生成与签名
- 本地合同存证与归档
- 法务流程自动化与归档
- 合同内容加密存储
- 合同签名与验证（RSA/ECC/国密算法可选）
- 合同归档与本地知识库
- 区块链存证与零知识证明
- AI辅助合同风险分析

### 3.3 实时通信系统

- 基于Ratchet库
- 会话基础认证
- 临时令牌认证（1小时有效期）
- 数据库存储验证记录（ws_auth_tokens表）
- 消息签名与压缩

## 4. 安全体系

- 混合加密策略（AES-256-GCM + Kyber1024/NTRU/SABER）
- 密钥轮换机制与区块链存证
- 健康检查机制
- 多层级安全设计
- 内存安全擦除（sodium_memzero）
- 全链路审计与合规导出

## 5. 数据库设计

- 用户、合同、签约、法务、审计、监控等核心表
- 所有合同、签约、法务数据均本地存储，不依赖第三方
- 支持表结构自愈、版本回滚、健康检查

## 6. 部署与测试

- 详见 [安全部署指南](/docs/security_deployment_guide.md)
- 支持自动化测试、CI/CD、灰度发布

## 7. 创新与专业性

- 全栈自研，所有核心功能、算法、流程均为本地实现
- 量子安全、AI智能、区块链、零知识证明等前沿技术融合
- 完整的安全体系与合规保障
- 高度模块化、可扩展、易维护
- 丰富的文档与开发工具链

## 8. 版权声明

本系统所有功能、模块、代码均为广西港妙科技有限公司自主研发，严禁抄袭仿冒。